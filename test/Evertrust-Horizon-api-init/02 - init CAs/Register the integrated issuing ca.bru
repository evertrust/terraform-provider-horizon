meta {
  name: Register the integrated issuing ca
  type: http
  seq: 5
}

post {
  url: {{horizonUrl}}/api/v1/cas
  body: json
  auth: none
}

headers {
  X-API-ID: {{X-API-ID}}
  X-API-KEY: {{X-API-KEY}}
}

body:json {
  {
      "name": "integratedissuingca",
      "certificate":"-----BEGIN CERTIFICATE-----\nMIIFezCCA2OgAwIBAgIIGjOachTpMsIwDQYJKoZIhvcNAQELBQAwQDELMAkGA1UEBhMCRlIxEjAQBgNVBAoTCUV2ZXJUcnVzdDEdMBsGA1UEAxMURXZlclRydXN0IFFBIFJvb3QgQ0EwHhcNMjAwMjE4MDAwMDAwWhcNNDAwMjE3MjM1OTU5WjBDMQswCQYDVQQGEwJGUjESMBAGA1UEChMJRXZlclRydXN0MSAwHgYDVQQDExdFdmVyVHJ1c3QgUUEgSXNzdWluZyBDQTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBALhqFgmBNDzQ7OhaJd87YFrKmWj7UczjBYvqU2w1BgM5R4YoCy22qqKmE0VTSsiaQ/ekoeDZrKx9TBaxWWAQutFwUulUPb6bu2b3fItAodzTha+hiY/kFnjsSCJpH1oi9zgkk6DvwD5mkvigcalFDk47Ky67WrHm3VvoNcKDuyQzhvpcFthyml4M0GBxJJGNF6K1rX4xjvWw8dz7hrXl4eTsubZPzrqx/HT5vTmiBVuzjQX9rbSjZxxMxtlfGBGJcRjKJY8HKJjHQ3Gx0tgDpcl/xltiYABS4K0gYvgIUEPIwt24d9sUqJe143t1aYQYrNnhH5idT4V4yc5I4ZyR00XBXoVqcEoKHEKGlxZNcde4hR33JU0LF3LXr/maqFOjaqauKwneoey+fGEvJI/0AOQ21xiYUSxpCHs0wEX6E6REfE+mkqm0b2QhbXgfENYE1WV1/BjpxYvO3XbVkzBMEkUDtotZ0krO3IEaDVky9YecDodSMjS9EegZ1LFxFMt7dQEh05Li5byoWraYZyqR0LPa5/kk+cMa1QtIZzNZV5kuP8UYsWvmsmVvZ1XDqel1riSm8x3TQEu9upbpqX4JaTxYE1ba1vT/fcbOIIWgrSMgyX96uFzFNI2IZgB75FKMVRvtfjLwlgpYcE82H31LMXdcIamIRF9qazq+CXQbPbeJAgMBAAGjdjB0MA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFBQQ3LAzCfegGprKagjWFldyJcCpMB8GA1UdIwQYMBaAFLXJ6OUfgI1+XhNPGTrA2GHhxYM8MA4GA1UdDwEB/wQEAwIBBjARBgNVHSAECjAIMAYGBFUdIAAwDQYJKoZIhvcNAQELBQADggIBAE+x/fi68KIjjpf8PPwewG2BirSvBiOlXGb4hyEXXpsbcqXmA75js8OwiYHrMGoDsn0Of/VuK7IFVEia2WShdfN2UGnHHSRqoXZykH5gSFc0l+AGNTnZxu+lmt5uKpmlRHQXI/Xn67Rw9dCZfFgvM+gbC5bnIqIL19MDHcXG1gZObYMwiYmhuNDa2qftNeyigU0dGhHBPWwdetqKLOeN7xQZNYh4s88P5V9OATQqcs5Wf0tpJG5JCOAzEQ6a1lh4km+LeJ14nSYh8BmnZZZSH3gEXolrEtnHlGzi/3zm/5/TraX/E72yhV904+y5sP46ppmXxCbHQ/O8wWAAvHgU3cvETwqi5RXLjpzwmEikS/u9geSWIEe86vMllaRGQ7j5wzh7N6vN0OG94lquimyFV1ZJY+sW05j3aLEoSSgnG57NMVyQgLifVVBKUOMiZuaLdgNBEfSt4SsUT/1CPe8wYOp2k3PcD6D7lsdRb6HBfMTKHMx1v8U0RS1bnZ971Z0JQDt2Pz1TkG5a2H3hqH91O4oUduoyR5elavDuwwFMSfI+BkfR+q+0RWaTPQkP7Fd55TqVg9tgjK+Xu1oXoZtbzR49rCNsNRQm1BfsSYOAyvmlTm3DxUVElNNCTcoJrf96qeh/3kgsA41yCapkWlgY52JiBHhNFtcCkpkdFj+ouLV/\n-----END CERTIFICATE-----",
          "trustedForServerAuthentication": true,
          "trustedForClientAuthentication": true,
          "outdatedRevocationStatusPolicy": "lastavailablestatus",
          "public": false
  }
}

assert {
  res.body: isJson
  res.status: eq 201
  res.body.name: isDefined
}
