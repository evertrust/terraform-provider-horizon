meta {
  name: Register the TCA
  type: http
  seq: 9
}

post {
  url: {{horizonUrl}}/api/v1/cas
  body: json
  auth: none
}

headers {
  X-API-ID: {{X-API-ID}}
  X-API-KEY: {{X-API-KEY}}
}

body:json {
  {
      "name": "EVERTRUST_Technical_CA",
      "certificate": "-----BEGIN CERTIFICATE-----\n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\nbd0cRr6Fhry/D2aB8IU=\n-----END CERTIFICATE-----",
      "refresh": "10m",
      "timeout": "10s",
      "crlUrl": "http://crl.evertrust.io/tca.crt",
      "outdatedRevocationStatusPolicy": "lastavailablestatus",
      "trustedForClientAuthentication": true,
      "trustedForServerAuthentication": true,
      "downloadable": false,
      "public": false
  }
}

assert {
  res.body: isJson
  res.status: eq 201
  res.body.name: isDefined
}
